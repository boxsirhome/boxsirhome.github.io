import{_ as t,r as o,o as c,c as i,d as n,e as s,b as a,w as r,f as e}from"./app-c4ddd265.js";const B="/assets/1-443c6d3f.png",d="/assets/2-ead1f8bb.png",y="/assets/3-b7c13be4.png",u="/assets/4-5e72cb58.png",v="/assets/5-6f7d42b5.png",m="/assets/6-8657be60.png",h="/assets/7-35180f12.png",b={},F=n("h2",{id:"运行博客",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#运行博客","aria-hidden":"true"},"#"),s(" 运行博客")],-1),A=n("h3",{id:"环境准备",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#环境准备","aria-hidden":"true"},"#"),s(" 环境准备")],-1),g={href:"https://nodejs.org/zh-cn",target:"_blank",rel:"noopener noreferrer"},E={href:"https://code.visualstudio.com/",target:"_blank",rel:"noopener noreferrer"},C=e(`<p>安装 Pnpm，在终端中输入下列命令安装 pnpm:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">corepack</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">enable</span></span>
<span class="line"><span style="color:#61AFEF;">corepack</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">prepare</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">pnpm@latest</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--activate</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="下载远程仓库" tabindex="-1"><a class="header-anchor" href="#下载远程仓库" aria-hidden="true">#</a> 下载远程仓库</h3><p>在本地仓下执行</p>`,4),_={href:"https://github.com/boxsirhome/boxsirhome.github.io.git",target:"_blank",rel:"noopener noreferrer"},f=e(`<h3 id="运行项目" tabindex="-1"><a class="header-anchor" href="#运行项目" aria-hidden="true">#</a> 运行项目</h3><p>使用 <strong>vscode</strong> 打开项目后在终端执行命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">pnpm</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">install</span><span style="color:#ABB2BF;">   </span><span style="color:#7F848E;font-style:italic;">#下载依赖</span></span>
<span class="line"><span style="color:#61AFEF;">pnpm</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">docs:dev</span><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">#启动开发服务器</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,3),k={href:"http://localhost:8088",target:"_blank",rel:"noopener noreferrer"},x=e('<h2 id="自动部署" tabindex="-1"><a class="header-anchor" href="#自动部署" aria-hidden="true">#</a> 自动部署</h2><blockquote><p>通过 GitHub Actions 实现推送即自动化部署</p></blockquote><h3 id="创建配置文件" tabindex="-1"><a class="header-anchor" href="#创建配置文件" aria-hidden="true">#</a> 创建配置文件</h3><p>1.在项目根目录下，创建 .github/workflows 文件夹，然后创建 .github/workflows/docs.yml 文件配置工作流。<br><img src="'+B+`" alt="1" loading="lazy"></p><p>2.把以下内容复制到 docs.yml 文件中</p><details class="hint-container details"><summary>配置文件</summary><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">docs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D19A66;">on</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;"># 每当 push 到 main 分支时触发部署</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">push</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">branches</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">main</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;"># 手动触发部署</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">workflow_dispatch</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">jobs</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">docs</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">runs-on</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">steps</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">actions/checkout@v4</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;"># “最近更新时间” 等 git 日志相关信息，需要拉取全部提交记录</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">fetch-depth</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Setup pnpm</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">pnpm/action-setup@v2</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;"># 选择要使用的 pnpm 版本</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8.11.0</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;"># 使用 pnpm 安装依赖</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">run_install</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Setup Node.js</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">actions/setup-node@v4</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;"># 选择要使用的 node 版本</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">node-version</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">16.17.1</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;"># 缓存 pnpm 依赖</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">pnpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;"># 运行构建脚本</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Build VuePress site</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">run</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">pnpm docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;"># 查看 workflow 的文档来获取更多信息</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;"># @see https://github.com/crazy-max/ghaction-github-pages</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Deploy to GitHub Pages</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">crazy-max/ghaction-github-pages@v4</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;"># 部署到 gh-pages 的分支</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">target_branch</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">gh-pages</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;"># 部署目录为 VuePress 的默认输出目录</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">build_dir</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">src/.vuepress/dist</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">env</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;"># @see https://docs.github.com/cn/actions/reference/authentication-in-a-workflow#about-the-github_token-secret</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">GITHUB_TOKEN</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\${{ secrets.GITHUB_TOKEN }}</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="推送博客" tabindex="-1"><a class="header-anchor" href="#推送博客" aria-hidden="true">#</a> 推送博客</h3><p>通过 <strong>git</strong> 推送到自己的远程仓库</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">git</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">add</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">.</span><span style="color:#ABB2BF;">                                 </span><span style="color:#7F848E;font-style:italic;">#添加所有文件到暂存区</span></span>
<span class="line"><span style="color:#61AFEF;">git</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">commit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-m</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;first commit&quot;</span><span style="color:#ABB2BF;">              </span><span style="color:#7F848E;font-style:italic;">#提交暂存区内容到本地仓库</span></span>
<span class="line"><span style="color:#61AFEF;">git</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">branch</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-M</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">main</span><span style="color:#ABB2BF;">                        </span><span style="color:#7F848E;font-style:italic;">#将当前分支重命名为 main 分支（已是main省略这一步）</span></span>
<span class="line"><span style="color:#61AFEF;">git</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">remote</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">add</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">origin</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">remote-ur</span><span style="color:#ABB2BF;">l&gt;        </span><span style="color:#7F848E;font-style:italic;">#关联到远程仓库（已关联省略这一步）</span></span>
<span class="line"><span style="color:#61AFEF;">git</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">push</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-u</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">origin</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">main</span><span style="color:#ABB2BF;">               </span><span style="color:#7F848E;font-style:italic;">#推送到远程main分支</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="检查actions" tabindex="-1"><a class="header-anchor" href="#检查actions" aria-hidden="true">#</a> 检查Actions</h3><p>1.提交完代码之后，在github的仓库中看下Actions下面的信息，看看是否执行成功了。<br><img src="`+d+'" alt="2" loading="lazy"><br> 2.有报错的话，根据报错信息修改。例如权限问题报错<br><img src="'+y+'" alt="3" loading="lazy"><br> 3.打开Settings-&gt;Actions-&gt;General 修改 Workflow permissions 为 Read and write permissions<br><img src="'+u+'" alt="4" loading="lazy"><br> 4.再手动执行一下Actions<br><img src="'+v+'" alt="5" loading="lazy"><br> 5.直到执行成功<br><img src="'+m+'" alt="6" loading="lazy"></p><h3 id="构建部署" tabindex="-1"><a class="header-anchor" href="#构建部署" aria-hidden="true">#</a> 构建部署</h3><p>在Setting标签页中，选择Pages侧边栏，Source 选择  Deploy from a branch，然后在 Branch 标签下选择 gh-pages 分支和 root 目录，<br><img src="'+h+'" alt="7" loading="lazy"></p><p>可通过提供的网站地址，访问博客啦🎉</p><h2 id="更新博客" tabindex="-1"><a class="header-anchor" href="#更新博客" aria-hidden="true">#</a> 更新博客 📌</h2>',15),w=n("li",null,[s("在vscode中更新博客内容后，进行 "),n("a",{href:"#%E6%8E%A8%E9%80%81%E5%8D%9A%E5%AE%A2"},"推送博客"),s(" 的操作，git推送完成会自动执行GitHub Actions重新部署")],-1),D={href:"https://crawler.algolia.com/admin/crawlers/",target:"_blank",rel:"noopener noreferrer"};function z(N,S){const l=o("ExternalLinkIcon"),p=o("RouterLink");return c(),i("div",null,[F,A,n("p",null,[s("安装 "),n("a",g,[s("Node.js"),a(l)])]),n("p",null,[s("安装 "),n("a",E,[s("VSCode"),a(l)])]),C,n("p",null,[s("git clone "),n("a",_,[s("https://github.com/boxsirhome/boxsirhome.github.io.git"),a(l)]),s(" #克隆远程项目")]),f,n("p",null,[s("此时可以在浏览器中访问 "),n("a",k,[s("http://localhost:8088"),a(l)]),s(" 看到项目启动")]),x,n("ul",null,[w,n("li",null,[s("如果希望博客的搜索功能，立即实现对新文章的搜索，需要前往 "),n("a",D,[s("Algolia Crawler"),a(l)]),s(" 来手动重启爬虫，实现对新文章的索引。具体步骤，参考 "),n("strong",null,[s("Algolia搜索>"),a(p,{to:"/about/decorate/algolia.html#%E6%89%A7%E8%A1%8C%E7%88%AC%E8%99%AB"},{default:r(()=>[s("执行爬虫")]),_:1})])])])])}const G=t(b,[["render",z],["__file","pushBlog.html.vue"]]);export{G as default};
