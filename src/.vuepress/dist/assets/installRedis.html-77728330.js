import{_ as s,o as n,c as a,f as l}from"./app-e4da3466.js";const e={},i=l(`<h2 id="_1-安装依赖环境" tabindex="-1"><a class="header-anchor" href="#_1-安装依赖环境" aria-hidden="true">#</a> 1.安装依赖环境</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">yum</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">install</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-y</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">gcc</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2-下载redis包并解压" tabindex="-1"><a class="header-anchor" href="#_2-下载redis包并解压" aria-hidden="true">#</a> 2.下载redis包并解压</h2><p>官网下载地址：Download | Redis</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 下载redis最新版本压缩包（这边是在线下载，离线环境就手动下载上传）</span></span>
<span class="line"><span style="color:#61AFEF;">wget</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">https://download.redis.io/redis-stable.tar.gz</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#  解压</span></span>
<span class="line"><span style="color:#61AFEF;">tar</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-zxvf</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redis-stable.tar.gz</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-进入解压目录并编译" tabindex="-1"><a class="header-anchor" href="#_3-进入解压目录并编译" aria-hidden="true">#</a> 3.进入解压目录并编译</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 进入解压目录</span></span>
<span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redis-stable</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 编译</span></span>
<span class="line"><span style="color:#61AFEF;">make</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-指定安装目录安装" tabindex="-1"><a class="header-anchor" href="#_4-指定安装目录安装" aria-hidden="true">#</a> 4.指定安装目录安装</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">make</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">install</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">PREFIX=/usr/local/redis</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_5-通过守护进程方式启动" tabindex="-1"><a class="header-anchor" href="#_5-通过守护进程方式启动" aria-hidden="true">#</a> 5.通过守护进程方式启动</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 第一步：从 redis 的源码目录中复制 redis.conf 到 redis 的安装目录</span></span>
<span class="line"><span style="color:#61AFEF;">cp</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/redis-stable/redis.conf</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/usr/local/redis/bin/</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 第二步：修改redis.conf配置文件</span></span>
<span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/usr/local/redis/bin/</span></span>
<span class="line"><span style="color:#61AFEF;">vi</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redis.conf</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 修改内容如下：</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#bind127.0.0.1注释（远程访问必改）</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#daemonize的值从no修改成yes</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#protected-mode的值从yes修改成no</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#logfile &quot;/var/log/redis.log&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#需要设置密码的话就去掉注释，将foobared改成密码</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#requirepass foobared</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-设置开机自启动" tabindex="-1"><a class="header-anchor" href="#_6-设置开机自启动" aria-hidden="true">#</a> 6.设置开机自启动</h2><p>切换到/lib/systemd/system/目录，创建redis.service文件。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/lib/systemd/system/</span></span>
<span class="line"><span style="color:#61AFEF;">vim</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redis.service</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>文件内容如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[Unit]</span></span>
<span class="line"><span style="color:#E06C75;">Description</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">redis-server</span></span>
<span class="line"><span style="color:#E06C75;">After</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">network.target</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">[Service]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># ExecStart需要按照实际情况修改成自己的地址</span></span>
<span class="line"><span style="color:#E06C75;">ExecStart</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">/usr/local/redis/bin/redis-server</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">/usr/local/redis/bin/redis.conf</span></span>
<span class="line"><span style="color:#E06C75;">Type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">forking</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">[Install]</span></span>
<span class="line"><span style="color:#E06C75;">WantedBy</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">multi-user.target</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PS：Type=forking这一句很关键，之前网上试了好多方法都不行。</p><h2 id="_7-设置开机启动命令" tabindex="-1"><a class="header-anchor" href="#_7-设置开机启动命令" aria-hidden="true">#</a> 7.设置开机启动命令</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 开机自动启动</span></span>
<span class="line"><span style="color:#61AFEF;">systemctl</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">enable</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redis.service</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 启动redis服务</span></span>
<span class="line"><span style="color:#61AFEF;">systemctl</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">start</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redis.service</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 查看服务状态</span></span>
<span class="line"><span style="color:#61AFEF;">systemctl</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">status</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redis.service</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 停止服务</span></span>
<span class="line"><span style="color:#61AFEF;">systemctl</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">stop</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redis.service</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 取消开机自动启动(卸载服务)</span></span>
<span class="line"><span style="color:#61AFEF;">systemctl</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">disabled</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redis.service</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#修改配置后重新加载</span></span>
<span class="line"><span style="color:#61AFEF;">systemctl</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">daemon-reload</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#查看redis状态</span></span>
<span class="line"><span style="color:#61AFEF;">ps</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">aux</span><span style="color:#ABB2BF;"> | </span><span style="color:#61AFEF;">grep</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redis</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-开放端口" tabindex="-1"><a class="header-anchor" href="#_8-开放端口" aria-hidden="true">#</a> 8.开放端口</h2><p>防火墙没开的无视</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">#开放6379端口</span></span>
<span class="line"><span style="color:#61AFEF;">firewall-cmd</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--zone=public</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--add-port=6379/tcp</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--permanent</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#重新加载防火墙</span></span>
<span class="line"><span style="color:#61AFEF;">firewall-cmd</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--reload</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;">9.重启服务器</span></span>
<span class="line"><span style="color:#61AFEF;">reboot</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22),p=[i];function o(c,r){return n(),a("div",null,p)}const d=s(e,[["render",o],["__file","installRedis.html.vue"]]);export{d as default};
